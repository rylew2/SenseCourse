!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.popmotion={})}(this,function(t){"use strict";var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};function n(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var e=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t};function o(t,r){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)r.indexOf(e[o])<0&&(n[e[o]]=t[e[o]])}return n}var i=0,u="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var r=Date.now(),n=Math.max(0,16.7-(r-i));i=r+n,setTimeout(function(){return t(i)},n)};function a(t){var r=[],n=[],e=0,o=!1,i=0;return{cancel:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)},process:function(){for(o=!0,r=(t=[n,r])[0],(n=t[1]).length=0,e=r.length,i=0;i<e;i++)r[i]();var t;o=!1},schedule:function(i,u){void 0===u&&(u=!1),t();var a=u&&o,c=a?r:n;-1===c.indexOf(i)&&(c.push(i),a&&(e=r.length))}}}var c="undefined"!=typeof performance&&void 0!==performance.now?function(){return performance.now()}:function(){return Date.now()},s=!1,f=40,p=16.7,l=!0,d=0,v=0;function h(){s||(s=!0,l=!0,u(w))}var m=a(h),g=a(h),y=a(h),b=a(h);function w(t){s=!1,v=l?p:Math.max(Math.min(t-d,f),1),l||(p=v),d=t,m.process(),g.process(),y.process(),b.process(),s&&(l=!1)}var O=g.schedule,M=y.schedule,x=b.schedule,k=g.cancel,P=function(){return v},C=function(){return d},A=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},S=function(t,r){return function(n){return Math.max(Math.min(n,r),t)}},Y=function(t){return{test:(r=t,function(t){return"string"==typeof t&&-1!==t.indexOf(r)}),parse:parseFloat,transform:function(r){return""+r+t}};var r},X=function(t){return function(r){return"string"==typeof r&&0===r.indexOf(t)}},j=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))},V=function(t){return"string"==typeof t?t.split(/,\s*/):[t]};function E(t){var r=t.length;return function(n){for(var e={},o=V(j(n)),i=0;i<r;i++)e[t[i]]=void 0!==o[i]?parseFloat(o[i]):1;return e}}var F={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},T=A({},F,{transform:S(0,1)}),L=Y("deg"),D=Y("%"),I=Y("px"),z=A({},F,{default:1}),R=/(-)?(\d[\d\.]*)/g,Z=function(t){return"${"+t+"}"},_={test:function(t){var r=t.match&&t.match(R);return void 0!==r&&r.constructor===Array&&r.length>1},parse:function(t){var r={};return t.match(R).forEach(function(t,n){return r[n]=parseFloat(t)}),r},createTransformer:function(t){var r=0,n=t.replace(R,function(){return Z(""+r++)});return function(t){var r=n;for(var e in t)t.hasOwnProperty(e)&&(r=r.replace(Z(e),t[e].toString()));return r}}},q=S(0,255),H=A({},F,{transform:function(t){return Math.round(q(t))}}),B={test:X("rgb"),parse:E(["red","green","blue","alpha"]),transform:function(t){var r=t.red,n=t.green,e=t.blue,o=t.alpha;return function(t){var r=t.red,n=t.green,e=t.blue,o=t.alpha;return"rgba("+r+", "+n+", "+e+", "+(void 0===o?1:o)+")"}({red:H.transform(r),green:H.transform(n),blue:H.transform(e),alpha:o})}},U={test:X("hsl"),parse:E(["hue","saturation","lightness","alpha"]),transform:function(t){var r=t.hue,n=t.saturation,e=t.lightness,o=t.alpha;return function(t){var r=t.hue,n=t.saturation,e=t.lightness,o=t.alpha;return"hsla("+r+", "+n+", "+e+", "+(void 0===o?1:o)+")"}({hue:Math.round(r),saturation:D.transform(n),lightness:D.transform(e),alpha:o})}},N=A({},B,{test:X("#"),parse:function(t){var r,n,e;return t.length>4?(r=t.substr(1,2),n=t.substr(3,2),e=t.substr(5,2)):(r=t.substr(1,1),n=t.substr(2,1),e=t.substr(3,1),r+=r,n+=n,e+=e),{red:parseInt(r,16),green:parseInt(n,16),blue:parseInt(e,16),alpha:1}}}),W={test:function(t){return B.test(t)||U.test(t)||N.test(t)},parse:function(t){return B.test(t)?B.parse(t):U.test(t)?U.parse(t):N.test(t)?N.parse(t):t},transform:function(t){return function(t){return void 0!==t.red}(t)?B.transform(t):function(t){return void 0!==t.hue}(t)?U.transform(t):t}},$=Object.freeze({getValueFromFunctionString:j,splitCommaDelimited:V,splitColorValues:E,number:F,alpha:T,degrees:L,percent:D,px:I,scale:z,complex:_,rgbUnit:H,rgba:B,hsla:U,hex:N,color:W}),G=function(t){return"number"==typeof t},K=function(t){return void 0!==t.x&&void 0!==t.y},J=function(t){return void 0!==t.z},Q={x:0,y:0,z:0},tt=function(t,r){return Math.abs(t-r)},rt=function(t,r){return void 0===r&&(r=Q),ut(Math.atan2(r.y-t.y,r.x-t.x))},nt=function(t){return t*Math.PI/180},et=function(t,r){if(void 0===r&&(r=Q),G(t)&&G(r))return tt(t,r);if(K(t)&&K(r)){var n=tt(t.x,r.x),e=tt(t.y,r.y),o=J(t)&&J(r)?tt(t.z,r.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(e,2)+Math.pow(o,2))}return 0},ot=function(t,r,n){var e=r-t;return 0===e?1:(n-t)/e},it=function(t,r,n){return-n*t+n*r+t},ut=function(t){return 180*t/Math.PI},at=function(t,r,n,e){return void 0===e&&(e=0),o=r+n*(t-r)/Math.max(e,n),void 0===i&&(i=2),i=Math.pow(10,i),Math.round(o*i)/i;var o,i},ct=function(t,r){return G(t)?t/(1e3/r):0},st=function(t,r){return r?t*(1e3/r):0},ft=function(t,r){var n=1/(t-1),e=1-1/t,o=Math.min(r/e,1);return Math.floor(o/n)*n},pt=Object.freeze({isPoint:K,isPoint3D:J,angle:rt,degreesToRadians:nt,dilate:function(t,r,n){return t+(r-t)*n},distance:et,getProgressFromValue:ot,getValueFromProgress:it,pointFromAngleAndDistance:function(t,r,n){return r=nt(r),{x:n*Math.cos(r)+t.x,y:n*Math.sin(r)+t.y}},radiansToDegrees:ut,smooth:at,speedPerFrame:ct,speedPerSecond:st,stepProgress:ft}),lt=function(t){return t},dt=function(t,r){var n=!0;void 0===r&&(r=t,n=!1);return function(e){return n?function(t){return t+r}(function(r){return r-t}(e)):(t=e,n=!0,r)}},vt=function(t,r,n){var e=t*t,o=r*r;return Math.sqrt(n*(o-e)+e)},ht=function(t,r){var n="string"==typeof t?W.parse(t):t,o="string"==typeof r?W.parse(r):r,i=e({},n),u=void 0!==t.hue||"string"==typeof t&&U.test(t)?it:vt;return function(t){for(var r in i=e({},i))"alpha"!==r&&i.hasOwnProperty(r)&&(i[r]=u(n[r],o[r],t));return i.alpha=it(n.alpha,o.alpha,t),i}},mt=function(t,r){return function(n){return Math.min(Math.max(n,t),r)}},gt=function(t,r){return function(n){return r(t(n))}},yt=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.reduce(gt)},bt=function(t){return void 0===t&&(t=lt),function(r,n){return function(e){var o=n-e,i=-r*(0-t(Math.abs(o)));return o<=0?n+i:n-i}}},wt=bt(),Ot=bt(Math.sqrt),Mt=Object.freeze({appendUnit:function(t){return function(r){return""+r+t}},applyOffset:dt,blendColor:ht,clamp:mt,pipe:yt,conditional:function(t,r){return function(n){return t(n)?r(n):n}},interpolate:function(t,r,n){var e,o,i,u,a=t.length;return 2!==a?function(t,r,n,e){var o=n-1;return t[0]>t[o]&&(t.reverse(),r.reverse()),function(i){if(i<=t[0])return r[0];if(i>=t[o])return r[o];for(var u=1;u<n&&!(t[u]>i||u===o);u++);var a=ot(t[u-1],t[u],i),c=e?e[u-1](a):a;return it(r[u-1],r[u],c)}}(t,r,a,n):(e=t[0],o=t[1],i=r[0],u=r[1],function(t){return(t-e)*(u-i)/(o-e)+i})},generateStaticSpring:bt,linearSpring:wt,nonlinearSpring:Ot,wrap:function(t,r){return function(n){var e=r-t;return((n-t)%e+e)%e+t}},smooth:function(t){void 0===t&&(t=50);var r=0,n=0;return function(e){var o=C(),i=o!==n?o-n:0,u=i?at(e,r,i,t):r;return n=o,r=u,u}},snap:function(t){if("number"==typeof t)return function(r){return Math.round(r/t)*t};var r=0,n=t.length;return function(e){var o=Math.abs(t[0]-e);for(r=1;r<n;r++){var i=t[r],u=Math.abs(i-e);if(0===u)return i;if(u>o)return t[r-1];if(r===n-1)return i;o=u}}},steps:function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=1),function(e){var o=ot(r,n,e);return it(r,n,ft(t,o))}},transformMap:function(t){return function(r){var n=e({},r);for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];n[o]=i(r[o])}return n}}}),xt=function(){function t(t){void 0===t&&(t={}),this.props=t}return t.prototype.applyMiddleware=function(t){return this.create(e({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=1===t.length?t[0]:yt.apply(void 0,t);return this.applyMiddleware(function(t){return function(r){return t(n(r))}})},t.prototype.while=function(t){return this.applyMiddleware(function(r,n){return function(e){return t(e)?r(e):n()}})},t.prototype.filter=function(t){return this.applyMiddleware(function(r,n){return function(n){return t(n)&&r(n)}})},t}(),kt=function(){return function(t,r){var n=t.middleware,e=t.onComplete,o=this;this.isActive=!0,this.update=function(t){o.observer.update&&o.updateObserver(t)},this.complete=function(){o.observer.complete&&o.isActive&&o.observer.complete(),o.onComplete&&o.onComplete(),o.isActive=!1},this.error=function(t){o.observer.error&&o.isActive&&o.observer.error(t),o.isActive=!1},this.observer=r,this.updateObserver=function(t){return r.update(t)},this.onComplete=e,r.update&&n&&n.length&&n.forEach(function(t){return o.updateObserver=t(o.updateObserver,o.complete)})}}(),Pt=function(t,r,n){var e=r.middleware;return new kt({middleware:e,onComplete:n},"function"==typeof t?{update:t}:t)},Ct=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.create=function(t){return new r(t)},r.prototype.start=function(t){void 0===t&&(t={});var r=!1,n={stop:function(){}},i=this.props,u=i.init,a=o(i,["init"]),c=u(Pt(t,a,function(){r=!0,n.stop()}));return n=c?e({},n,c):n,t.registerParent&&t.registerParent(n),r&&n.stop(),n},r}(xt),At=function(t){return new Ct({init:t})},St=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.subscribers=[],r}return n(r,t),r.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},r.prototype.error=function(t){this.subscribers.forEach(function(r){return r.error(t)})},r.prototype.update=function(t){for(var r=0;r<this.subscribers.length;r++)this.subscribers[r].update(t)},r.prototype.subscribe=function(t){var r=this,n=Pt(t,this.props);return this.subscribers.push(n),{unsubscribe:function(){var t=r.subscribers.indexOf(n);-1!==t&&r.subscribers.splice(t,1)}}},r.prototype.stop=function(){this.parent&&this.parent.stop()},r.prototype.registerParent=function(t){this.stop(),this.parent=t},r}(xt),Yt=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.create=function(t){return new r(t)},r}(St),Xt=function(t){return Array.isArray(t)},jt=function(t){var r=typeof t;return"string"===r||"number"===r},Vt=function(t){function r(r){var n=t.call(this,r)||this;return n.scheduleVelocityCheck=function(){return x(n.velocityCheck)},n.velocityCheck=function(){C()!==n.lastUpdated&&(n.prev=n.current)},n.prev=n.current=r.value||0,jt(n.current)?(n.updateCurrent=function(t){return n.current=t},n.getVelocityOfCurrent=function(){return n.getSingleVelocity(n.current,n.prev)}):Xt(n.current)?(n.updateCurrent=function(t){return n.current=t.slice()},n.getVelocityOfCurrent=function(){return n.getListVelocity()}):(n.updateCurrent=function(t){for(var r in n.current={},t)t.hasOwnProperty(r)&&(n.current[r]=t[r])},n.getVelocityOfCurrent=function(){return n.getMapVelocity()}),r.initialSubscription&&n.subscribe(r.initialSubscription),n}return n(r,t),r.prototype.create=function(t){return new r(t)},r.prototype.get=function(){return this.current},r.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},r.prototype.update=function(r){t.prototype.update.call(this,r),this.prev=this.current,this.updateCurrent(r),this.timeDelta=P(),this.lastUpdated=C(),x(this.scheduleVelocityCheck)},r.prototype.subscribe=function(r){var n=t.prototype.subscribe.call(this,r);return this.update(this.current),n},r.prototype.getSingleVelocity=function(t,r){return"number"==typeof t&&"number"==typeof r?st(t-r,this.timeDelta):st(parseFloat(t)-parseFloat(r),this.timeDelta)||0},r.prototype.getListVelocity=function(){var t=this;return this.current.map(function(r,n){return t.getSingleVelocity(r,t.prev[n])})},r.prototype.getMapVelocity=function(){var t={};for(var r in this.current)this.current.hasOwnProperty(r)&&(t[r]=this.getSingleVelocity(this.current[r],this.prev[r]));return t},r}(St),Et=function(t){var r=t.getCount,n=t.getFirst,e=t.getOutput,o=t.mapApi,i=t.setProp,u=t.startActions;return function(t){return At(function(a){var c=a.update,s=a.complete,f=a.error,p=r(t),l=e(),d=function(){return c(l)},v=0,h=u(t,function(t,r){var n=!1;return t.start({complete:function(){n||(n=!0,++v===p&&O(s))},error:f,update:function(t){i(l,r,t),O(d,!0)}})});return Object.keys(n(h)).reduce(function(t,r){return t[r]=o(h,r),t},{})})}},Ft=Et({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Object.keys(t).reduce(function(e,o){return t[o][r]&&(n[0]&&void 0!==n[0][o]?e[o]=t[o][r](n[0][o]):e[o]=(i=t[o])[r].apply(i,n)),e;var i},{})}},setProp:function(t,r,n){return t[r]=n},startActions:function(t,r){return Object.keys(t).reduce(function(n,e){return n[e]=r(t[e],e),n},{})}}),Tt=Et({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,r){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.map(function(t,e){if(t[r])return Array.isArray(n[0])?t[r](n[0][e]):t[r].apply(t,n)})}},setProp:function(t,r,n){return t[r]=n},startActions:function(t,r){return t.map(function(t,n){return r(t,n)})}}),Lt=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Tt(t)},Dt=W.test,It=function(t,r){return"string"==typeof r.from&&Dt(r.from)&&"string"==typeof r.to&&Dt(r.to)?t(e({},r,{from:0,to:1})).pipe(ht(r.from,r.to),W.transform):t(r)},zt=function(t,r){var n=function(t){var r=Object.keys(t);return{getVectorKeys:function(n){return r.reduce(function(r,e){return void 0===n[e]||t[e](n[e])||r.push(e),r},[])},test:function(n){return n&&r.reduce(function(r,e){return r||void 0!==n[e]&&!t[e](n[e])},!1)}}}(r),o=n.test,i=n.getVectorKeys;return function(r){if(!o(r))return t(r);var n=i(r),u=r[n[0]];return Array.isArray(u)?function(t,r,n){var o=n[0],i=r[o].map(function(o,i){return It(t,n.reduce(function(t){return function(r,n){return r[n]=r[n][t],r}}(i),e({},r)))});return Lt.apply(void 0,i)}(t,r,n):"string"==typeof u&&Dt(u)?function(t,r){return It(t,r)}(t,r):function(t,r,n){var o=n[0],i=Object.keys(r[o]).reduce(function(o,i){return o[i]=It(t,n.reduce(function(t){return function(r,n){return r[n]=r[n][t],r}}(i),e({},r))),o},{});return Ft(i)}(t,r,n)}},Rt=function(){return At(function(t){var r=t.update,n=!0,e=c(),o=function(){n&&(r(Math.max(C()-e,0)),O(o))};return O(o),{stop:function(){return n=!1}}})},Zt=zt(function(t){return void 0===t&&(t={}),At(function(r){var n=r.complete,e=r.update,o=t.velocity,i=void 0===o?0:o,u=t.from,a=void 0===u?0:u,c=t.power,s=void 0===c?.8:c,f=t.timeConstant,p=void 0===f?350:f,l=t.restDelta,d=void 0===l?.5:l,v=t.modifyTarget,h=0,m=s*i,g=Math.round(a+m),y=void 0===v?g:v(g),b=Rt().start(function(){h+=P();var t=-m*Math.exp(-h/p),r=t>d||t<-d;e(r?y+t:y),r||(b.stop(),n())});return{stop:function(){return b.stop()}}})},{from:F.test,modifyTarget:function(t){return"function"==typeof t},velocity:F.test}),_t=function(t){return function(r){return 1-t(1-r)}},qt=function(t){return function(r){return r<=.5?t(2*r)/2:(2-t(2*(1-r)))/2}},Ht=function(t){return t},Bt=function(t){return function(r){return Math.pow(r,t)}},Ut=Bt(2),Nt=_t(Ut),Wt=qt(Ut),$t=function(t){return 1-Math.sin(Math.acos(t))},Gt=_t($t),Kt=qt(Gt),Jt=function(t){return function(r){return r*r*((t+1)*r-t)}},Qt=Jt(1.525),tr=_t(Qt),rr=qt(Qt),nr=function(t){var r=Jt(t);return function(t){return(t*=2)<1?.5*r(t):.5*(2-Math.pow(2,-10*(t-1)))}},er=nr(1.525),or=8,ir=.001,ur=1e-7,ar=10,cr=11,sr=1/(cr-1),fr="undefined"!=typeof Float32Array,pr=function(t,r){return 1-3*r+3*t},lr=function(t,r){return 3*r-6*t},dr=function(t){return 3*t},vr=function(t,r,n){return 3*pr(r,n)*t*t+2*lr(r,n)*t+dr(r)},hr=function(t,r,n){return((pr(r,n)*t+lr(r,n))*t+dr(r))*t};var mr=Object.freeze({createReversedEasing:_t,createMirroredEasing:qt,linear:Ht,createExpoIn:Bt,easeIn:Ut,easeOut:Nt,easeInOut:Wt,circIn:$t,circOut:Gt,circInOut:Kt,createBackIn:Jt,backIn:Qt,backOut:tr,backInOut:rr,createAnticipateEasing:nr,anticipate:er,cubicBezier:function(t,r,n,e){var o=fr?new Float32Array(cr):new Array(cr),i=!1,u=function(r){for(var e,i,u,a=0,c=1,s=cr-1;c!=s&&o[c]<=r;++c)a+=sr;return e=(r-o[--c])/(o[c+1]-o[c]),(u=vr(i=a+e*sr,t,n))>=ir?function(r,e){for(var o=0,i=0;o<or;++o){if(0===(i=vr(e,t,n)))return e;e-=(hr(e,t,n)-r)/i}return e}(r,i):0===u?i:function(r,e,o){var i,u,a=0;do{(i=hr(u=e+(o-e)/2,t,n)-r)>0?o=u:e=u}while(Math.abs(i)>ur&&++a<ar);return u}(r,a,a+sr)},a=function(){i=!0,t==r&&n==e||function(){for(var r=0;r<cr;++r)o[r]=hr(r*sr,t,n)}()};return function(o){return i||a(),t===r&&n===e?o:0===o?0:1===o?1:hr(u(o),r,e)}}}),gr=zt(function(t){var r=t.from,n=void 0===r?0:r,e=t.to,o=void 0===e?1:e,i=t.ease,u=void 0===i?Ht:i;return At(function(t){var r=t.update;return{seek:function(t){return r(t)}}}).pipe(u,function(t){return it(n,o,t)})},{ease:function(t){return"function"==typeof t},from:F.test,to:F.test}),yr=mt(0,1),br=function(t){return void 0===t&&(t={}),At(function(r){var n,e=r.update,o=r.complete,i=t.duration,u=void 0===i?300:i,a=t.ease,c=void 0===a?Nt:a,s=t.flip,f=void 0===s?0:s,p=t.loop,l=void 0===p?0:p,d=t.yoyo,v=void 0===d?0:d,h=t.from,m=void 0===h?0:h,g=t.to,y=void 0===g?1:g,b=t.elapsed,w=void 0===b?0:b,M=t.playDirection,x=void 0===M?1:M,k=t.flipCount,C=void 0===k?0:k,A=t.yoyoCount,S=void 0===A?0:A,Y=t.loopCount,X=void 0===Y?0:Y,j=gr({from:m,to:y,ease:c}).start(e),V=0,E=!1,F=function(){return x*=-1},T=function(){V=yr(ot(0,u,w)),j.seek(V)},L=function(){E=!0,n=Rt().start(function(){w+=P()*x,T(),function(){var t=1===x?E&&w>=u:E&&w<=0;if(!t)return!1;if(t&&!l&&!f&&!v)return!0;var r,n=!1;return l&&X<l?(w=0,X++,n=!0):f&&C<f?(w=u-w,j=gr({from:m=(r=[y,m])[0],to:y=r[1],ease:c}).start(e),C++,n=!0):v&&S<v&&(F(),S++,n=!0),!n}()&&o&&(n.stop(),O(o,!0))})},D=function(){E=!1,n&&n.stop()};return L(),{isActive:function(){return E},getElapsed:function(){return mt(0,u)(w)},getProgress:function(){return V},stop:function(){D()},pause:function(){return D(),this},resume:function(){return L(),this},seek:function(t){return w=it(0,u,t),O(T,!0),this},reverse:function(){return F(),this}}})},wr=mt(0,1),Or=function(t){var r=t.easings,n=t.ease,i=void 0===n?Ht:n,u=t.times,a=t.values,c=o(t,["easings","ease","times","values"]);r=Array.isArray(r)?r:function(t,r){return t.map(function(){return r||Nt}).splice(0,t.length-1)}(a,r),u=u||function(t){var r=t.length;return t.map(function(t,n){return 0!==n?n/(r-1):0})}(a);var s=r.map(function(t,r){return gr({from:a[r],to:a[r+1],ease:t})});return br(e({},c,{ease:i})).applyMiddleware(function(t){return function(t,r,n){var e=t.length,o=e-1,i=o-1,u=r.map(function(t){return t.start(n)});return function(r){r<=t[0]&&u[0].seek(0),r>=t[o]&&u[i].seek(1);for(var n=1;n<e&&!(t[n]>r||n===o);n++);var a=ot(t[n-1],t[n],r);u[n-1].seek(wr(a))}}(u,s,t)})},Mr=zt(function(t){return void 0===t&&(t={}),At(function(r){var n=r.complete,e=r.update,o=t.acceleration,i=void 0===o?0:o,u=t.friction,a=void 0===u?0:u,c=t.velocity,s=void 0===c?0:c,f=t.springStrength,p=t.to,l=t.restSpeed,d=void 0===l?.001:l,v=t.from,h=void 0===v?0:v,m=Rt().start(function(){var t=Math.max(P(),16);i&&(s+=ct(i,t)),a&&(s*=Math.pow(1-a,t/100)),void 0!==f&&void 0!==p&&(s+=(p-h)*ct(f,t)),h+=ct(s,t),e(h),!1!==d&&(!s||Math.abs(s)<=d)&&(m.stop(),n())});return{set:function(t){return h=t,this},setAcceleration:function(t){return i=t,this},setFriction:function(t){return a=t,this},setSpringStrength:function(t){return f=t,this},setSpringTarget:function(t){return p=t,this},setVelocity:function(t){return s=t,this},stop:function(){return m.stop()}}})},{acceleration:F.test,friction:F.test,velocity:F.test,from:F.test,to:F.test,springStrength:F.test}),xr=zt(function(t){return void 0===t&&(t={}),At(function(r){var n=r.update,e=r.complete,o=t.velocity,i=void 0===o?0:o,u=t.from,a=void 0===u?0:u,c=t.to,s=void 0===c?0:c,f=t.stiffness,p=void 0===f?100:f,l=t.damping,d=void 0===l?10:l,v=t.mass,h=void 0===v?1:v,m=t.restSpeed,g=void 0===m?.01:m,y=t.restDelta,b=void 0===y?.01:y,w=i?-i/1e3:0,O=0,M=s-a,x=a,k=x,C=Rt().start(function(){var t=P();O+=t;var r=d/(2*Math.sqrt(p*h)),o=Math.sqrt(p/h)/1e3;if(k=x,r<1){var u=Math.exp(-r*o*O),a=o*Math.sqrt(1-r*r);x=s-u*((w+r*o*M)/a*Math.sin(a*O)+M*Math.cos(a*O))}else u=Math.exp(-o*O),x=s-u*(M+(w+o*M)*O);i=st(x-k,t);var c=Math.abs(i)<=g,f=Math.abs(s-x)<=b;c&&f?(n(x=s),C.stop(),e()):n(x)});return{stop:function(){return C.stop()}}})},{from:F.test,to:F.test,stiffness:F.test,damping:F.test,mass:F.test,velocity:F.test}),kr=function(t,r){return Array.isArray(r)?t.push.apply(t,function(t){var r=[],n=t[t.length-1],e="number"==typeof n,o=e?n:0,i=e?t.slice(0,-1):t,u=i.length,a=0;return i.forEach(function(t,n){if(r.push(t),n!==u-1){var e=t.duration||300;a+=o,r.push("-"+(e-a))}}),r}(r)):t.push(r),t},Pr=function(t,r,n){var e=t.duration,o=t.easings,i=t.times,u=t.values,a=u.length,c=i[a-1],s=0===r.at?0:r.at/e,f=(r.at+r.duration)/e;if(0===n)u.push(r.from),i.push(s);else if(c!==s){void 0!==r.from&&(u.push(u[a-1]),i.push(s),o.push(Ht));var p=void 0!==r.from?r.from:u[a-1];u.push(p),i.push(s),o.push(Ht)}else void 0!==r.from&&(u.push(r.from),i.push(s),o.push(Ht));return u.push(r.to),i.push(f),o.push(r.ease||Wt),t},Cr=function(t,r,n){return At(function(e){var o=e.update,i=r.split(" ").map(function(r){return t.addEventListener(r,o,n),r});return{stop:function(){return i.forEach(function(r){return t.removeEventListener(r,o,n)})}}})},Ar=function(t,r){return void 0===r&&(r={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),r.clientX=r.x=t.clientX,r.clientY=r.y=t.clientY,r.pageX=t.pageX,r.pageY=t.pageY,r},Sr=[{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}],Yr=!1;if("undefined"!=typeof document){Cr(document,"touchstart touchmove",!0).start(function(t){var r=t.touches;Yr=!0;var n=r.length;Sr.length=0;for(var e=0;e<n;e++){var o=r[e];Sr.push(Ar(o))}})}var Xr=function(t){var r=void 0===t?{}:t,n=r.preventDefault,e=void 0===n||n,o=r.scale,i=void 0===o?1:o,u=r.rotate,a=void 0===u?0:u;return At(function(t){var r=t.update,n={touches:Sr,scale:i,rotate:a},o=0,u=0,c=Sr.length>1;if(c){var s=Sr[0],f=Sr[1];o=et(s,f),u=rt(s,f)}var p=function(){if(c){var t=Sr[0],e=Sr[1],s=et(t,e),f=rt(t,e);n.scale=i*(s/o),n.rotate=a+(f-u)}r(n)},l=Cr(document,"touchmove",{passive:!e}).start(function(t){(e||t.touches.length>1)&&t.preventDefault(),O(p)});return Yr&&O(p),{stop:function(){k(p),l.stop()}}})},jr={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0},Vr=!1;if("undefined"!=typeof document){Cr(document,"mousedown mousemove",!0).start(function(t){Vr=!0,Ar(t,jr)})}var Er,Fr,Tr=function(t){var r=(void 0===t?{}:t).preventDefault,n=void 0===r||r;return At(function(t){var r=t.update,e=function(){return r(jr)},o=Cr(document,"mousemove").start(function(t){n&&t.preventDefault(),O(e)});return Vr&&O(e),{stop:function(){k(e),o.stop()}}})},Lr=function(t){return t[0]},Dr=function(t){return void 0===t&&(t={}),Yr?Xr(t).pipe(function(t){return t.touches},Lr):Tr(t)},Ir=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return At(function(r){var n,e=r.update,o=r.complete,i=0,u=function(){n=t[i].start({complete:function(){++i>=t.length?o():u()},update:e})};return u(),{stop:function(){return n&&n.stop()}}})},zr=function(t){return At(function(r){var n=r.complete,e=setTimeout(n,t);return{stop:function(){return clearTimeout(e)}}})};Er=function(t,r){t||"undefined"==typeof console||console.warn("Hey, listen! "+r)},Fr=function(t,r){if(!t)throw new Error("Hey, listen! ".toUpperCase()+r)};var Rr,Zr=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},_r=function(t){var r=t.onRead,n=t.onRender,e=t.aliasMap,o=void 0===e?{}:e,i=t.useCache,u=void 0===i||i;return function(t){var e={},i=[],a=!1,c=function(t,r){var n=o[t]||t,u=e[n];e[n]=r,e[n]!==u&&(-1===i.indexOf(n)&&i.push(n),a||(a=!0,M(s)))};function s(r){return void 0===r&&(r=!1),(r||a)&&(n(e,t,i),a=!1,i.length=0),this}return{get:function(n){var i=o[n]||n;return i?u&&void 0!==e[i]?e[i]:r(i,t):e},set:function(t,r){if("string"==typeof t){if(void 0===r)return function(r){return c(t,r)};c(t,r)}else for(var n in t)t.hasOwnProperty(n)&&c(n,t[n]);return this},render:s}}},qr=/([a-z])([A-Z])/g,Hr=function(t){return t.replace(qr,"$1-$2").toLowerCase()},Br=new Map,Ur=new Map,Nr=["Webkit","Moz","O","ms",""],Wr=Nr.length,$r=function(t,r){void 0===r&&(r=!1);var n=r?Ur:Br;return n.has(t)||function(t){if("undefined"!=typeof document){Rr=Rr||document.createElement("div");for(var r=0;r<Wr;r++){var n=Nr[r],e=""===n,o=e?t:n+t.charAt(0).toUpperCase()+t.slice(1);o in Rr.style&&(Br.set(t,o),Ur.set(t,(e?"":"-")+Hr(o)))}}}(t),n.get(t)||t},Gr=["","X","Y","Z"],Kr=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,r){return Gr.reduce(function(t,n){return t.push(r+n),t},t)},["x","y","z"]),Jr=Kr.reduce(function(t,r){return t[r]=!0,t},{}),Qr=function(t){return!0===Jr[t]},tn=function(t,r){return Kr.indexOf(t)-Kr.indexOf(r)},rn=function(t){return"transformOriginX"===t||"transformOriginY"===t},nn={color:W,backgroundColor:W,outlineColor:W,fill:W,stroke:W,borderColor:W,borderTopColor:W,borderRightColor:W,borderBottomColor:W,borderLeftColor:W,borderRadius:I,width:I,maxWidth:I,height:I,maxHeight:I,top:I,left:I,bottom:I,right:I,rotate:L,rotateX:L,rotateY:L,rotateZ:L,scale:z,scaleX:z,scaleY:z,scaleZ:z,skewX:L,skewY:L,distance:I,translateX:I,translateY:I,translateZ:I,perspective:I,opacity:T,transformOriginX:D,transformOriginY:D,transformOriginZ:I},en=function(t){return nn[t]},on="number",un="object",an="transform-origin",cn="transform",sn="translateZ",fn=";transform: none",pn=function(t,r){return";"+t+":"+r};var ln=new Set(["scrollLeft","scrollTop"]),dn=_r({onRead:function(t,r){var n=r.element,e=r.preparseOutput,o=en(t);if(Qr(t))return o&&o.default||0;if(ln.has(t))return n[t];var i=window.getComputedStyle(n,null).getPropertyValue($r(t,!0))||0;return e&&o&&o.parse?o.parse(i):i},onRender:function(t,r,n){var e=r.element,o=r.enableHardwareAcceleration;e.style.cssText+=function(t,r,n,e){void 0===r&&(r=!0),void 0===n&&(n=!0);for(var o=!0===r?Object.keys(t):r,i="",u="",a=!1,c=!0,s=!1,f=!1,p=o.length,l=0;l<p;l++){var d=o[l];if(Qr(d)){for(var v in s=!0,t)Qr(v)&&-1===o.indexOf(v)&&o.push(v);break}}o.sort(tn);var h=o.length;for(l=0;l<h;l++)if(d=o[l],!e.has(d)){var m=Qr(d),g=t[d],y=en(d);m&&(y.default&&g!==y.default||!y.default&&0!==g)&&(c=!1),y&&(typeof g===on||typeof g===un)&&y.transform&&(g=y.transform(g)),m?(u+=d+"("+g+") ",f=d===sn||f):rn(d)?(t[d]=g,a=!0):i+=pn($r(d,!0),g)}return a&&(i+=pn(an,(t.transformOriginX||0)+" "+(t.transformOriginY||0)+" "+(t.transformOriginZ||0))),s&&(!f&&n&&(u+=sn+"(0)"),i+=pn(cn,c?fn:u)),i}(t,n,o,ln),-1!==n.indexOf("scrollLeft")&&(e.scrollLeft=t.scrollLeft),-1!==n.indexOf("scrollTop")&&(e.scrollTop=t.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:ln}),vn=function(t,r){return t/100*r+"px"},hn={fill:W,stroke:W,scale:z,scaleX:z,scaleY:z,opacity:T,fillOpacity:T,strokeOpacity:T},mn=_r({onRead:function(t,r){var n=r.element;if(Qr(t)){var e=function(t){return hn[t]}(t);return e?e.default:0}return n.getAttribute(t)},onRender:function(t,r,n){var e=r.dimensions;!function(t,r){for(var n in r)r.hasOwnProperty(n)&&t.setAttribute(n,r[n])}(r.element,function(t,r,n,e){var o=!1,i=!1,u={},a=n?{pathLength:"0",pathSpacing:""+e}:void 0,c=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,s=void 0!==t.scaleY?t.scaleY||1e-7:c||1,f=r.width*((t.originX||50)/100)+r.x,p=r.height*((t.originY||50)/100)+r.y,l=1*c*-f,d=1*s*-p,v=f/c,h=p/s,m={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+l+", "+d+") scale("+c+", "+s+") translate("+v+", "+h+") ",rotate:"rotate("+t.rotate+", "+f+", "+p+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var g in t)if(t.hasOwnProperty(g)){var y=t[g];Qr(g)?o=!0:!n||"pathLength"!==g&&"pathSpacing"!==g||"number"!=typeof y?n&&"pathOffset"===g?u["stroke-dashoffset"]=vn(-y,e):u[Hr(g)]=y:(i=!0,a[g]=vn(y,e))}if(i&&(u["stroke-dasharray"]=a.pathLength+" "+a.pathSpacing),o)for(var g in u.transform="",m)if(m.hasOwnProperty(g)){var b="scale"===g?"1":"0";u.transform+=m[g].replace(/undefined/g,b)}return u}(t,e,r.isPath,r.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),gn=_r({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var r=t.scrollTop,n=void 0===r?0:r,e=t.scrollLeft,o=void 0===e?0:e;return window.scrollTo(o,n)}}),yn=new WeakMap,bn=function(t,r){var n;return t instanceof HTMLElement?n=function(t,r){return dn(Zr({element:t,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(t,r):t instanceof SVGElement?n=function(t){var r=t.getBBox(),n={element:t,dimensions:{x:r.x,y:r.y,width:r.width,height:r.height},isPath:!1};return"path"===t.tagName&&(n.isPath=!0,n.pathLength=t.getTotalLength()),mn(n)}(t):"undefined"!=typeof window&&t===window&&(n=gn(t)),Fr(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),yn.set(t,n),n},wn=function(t,r){return yn.has(t)?yn.get(t):bn(t,r)};function On(t,r){var n="string"==typeof t?document.querySelector(t):t;return wn(n,r)}t.action=At,t.multicast=function(){return new Yt},t.value=function(t,r){return new Vt({value:t,initialSubscription:r})},t.decay=Zt,t.keyframes=Or,t.everyFrame=Rt,t.physics=Mr,t.spring=xr,t.timeline=function(t,r){var n=void 0===r?{}:r,o=n.duration,i=n.elapsed,u=n.ease,a=n.loop,c=n.flip,s=n.yoyo,f=0,p=0,l=[];t.reduce(kr,[]).forEach(function(t){if("string"==typeof t)f+=parseFloat(t);else if("number"==typeof t)f=t;else{var r=e({},t,{at:f});r.duration=void 0===r.duration?300:r.duration,l.push(r),f+=r.duration,p=Math.max(p,r.at+r.duration)}});for(var d={},v=l.length,h=0;h<v;h++){var m=l[h],g=m.track;if(void 0===g)throw new Error("No track defined");d.hasOwnProperty(g)||(d[g]=[]),d[g].push(m)}var y={};for(var b in d)if(d.hasOwnProperty(b)){var w=d[b].reduce(Pr,{duration:p,easings:[],times:[],values:[]});y[b]=Or(e({},w,{duration:o||p,ease:u,elapsed:i,loop:a,yoyo:s,flip:c}))}return Ft(y)},t.tween=br,t.listen=Cr,t.pointer=function(t){void 0===t&&(t={});var r=t.x,n=t.y,e=o(t,["x","y"]);if(void 0!==r||void 0!==n){var i=dt(r||0),u=dt(n||0),a={x:0,y:0};return Dr(e).pipe(function(t){return a.x=i(t.x),a.y=u(t.y),a})}return Dr(e)},t.mouse=Tr,t.multitouch=Xr,t.chain=Ir,t.composite=Ft,t.crossfade=function(t,r){return At(function(n){var o=0,i=Lt(t,r).start(e({},n,{update:function(t){var r=t[0],e=t[1];n.update(it(r,e,o))}}));return{setBalance:function(t){return o=t},stop:function(){return i.stop()}}})},t.delay=zr,t.merge=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return At(function(r){var n=t.map(function(t){return t.start(r)});return{stop:function(){return n.forEach(function(t){return t.stop()})}}})},t.parallel=Lt,t.schedule=function(t,r){return At(function(n){var e,o=n.update,i=n.complete,u=t.start({update:function(){return void 0!==e&&o(e)},complete:i}),a=r.start({update:function(t){return e=t},complete:i});return{stop:function(){u.stop(),a.stop()}}})},t.stagger=function(t,r){var n="number"==typeof r,e=t.map(function(t,e){var o=n?r*e:r(e);return Ir(zr(o),t)});return Lt.apply(void 0,e)},t.calc=pt,t.easing=mr,t.transform=Mt,t.styler=On,t.css=function(t,r){return Er(!1,"css() is deprecated, use styler instead"),On(t,r)},t.svg=function(t,r){return Er(!1,"svg() is deprecated, use styler instead"),On(t,r)},t.valueTypes=$,Object.defineProperty(t,"__esModule",{value:!0})});
